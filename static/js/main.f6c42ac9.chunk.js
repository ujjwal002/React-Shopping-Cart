(this["webpackJsonpreactjs-shopping-cart"]=this["webpackJsonpreactjs-shopping-cart"]||[]).push([[0],{1558:function(e,t,c){},1565:function(e,t,c){"use strict";c.r(t);var n=c(2),s=c.n(n),a=c(37),r=c.n(a),o=(c(45),c(4)),i=c(5),d=(c(46),c(47),Object(n.createContext)()),l=(c(48),c(9)),u=c(1),j=function(e){var t=e.cartObj,c=e.removeFromCart;return Object(u.jsxs)("div",{className:"cart-item",children:[Object(u.jsx)("img",{src:t.smallImage,className:"w-36 h-30 ml-0"}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"font-medium capitalize",children:t.productName}),Object(u.jsxs)("p",{children:["Quantity: ",t.count]})]}),Object(u.jsxs)("p",{className:"text-green-700 font-medium",children:["\u20b9",t.productPrice]}),Object(u.jsx)("div",{className:"absolute top-2 right-2",children:Object(u.jsx)("button",{onClick:function(){return c(t)},className:"focus:outline-none",children:Object(u.jsx)(l.a,{})})})]})},b="ADD_CART_ITEM",m="REMOVE_CART_ITEM",p="UPDATE_CART_ITEM_COUNT",O=function(e){var t=e.closeCart,c=e.show?"modal display-block":"modal display-none",s=Object(n.useContext)(d),a=s.cartItem,r=s.dispatch,b=Object(n.useState)(0),p=Object(o.a)(b,2),O=p[0],h=p[1],f=Object(n.useState)(0),x=Object(o.a)(f,2),v=x[0],N=x[1];Object(n.useEffect)((function(){!function(){var e=0,t=0;a.map((function(c){e+=c.count*parseFloat(c.productPrice),t+=c.count})),h(e),N(t)}()}),[a]);var g=function(e){e.isAddedtoCart=!1,e.count=0,r({type:m,payload:e})};return Object(u.jsxs)("div",{className:c,children:[Object(u.jsx)("div",{className:"absolute right-3 top-6",children:Object(u.jsx)("button",{onClick:function(){return t()},className:"focus:outline-none",children:Object(u.jsx)(l.a,{className:"w-5 h-5"})})}),Object(u.jsxs)("div",{className:"flex items-center justify-center py-4",children:[Object(u.jsx)(i.a,{className:"w-8 h-8"})," ",Object(u.jsx)("span",{className:"cart-count",children:v}),Object(u.jsx)("h1",{className:"text-lg font-bold ml-2",children:"Cart"})]}),Object(u.jsx)("div",{className:"cart-container",children:a.length>0?Object(u.jsx)("div",{children:a.map((function(e){return Object(u.jsx)(j,{cartObj:e,removeFromCart:g},e.id)}))}):Object(u.jsx)("p",{className:"p-10 text-red-500 decoration-clone font-semibold",children:"Your cart is empty"})}),Object(u.jsxs)("div",{className:"checkout-container",children:[Object(u.jsxs)("div",{className:"flex place-content-between mb-5",children:[Object(u.jsx)("h1",{children:"Total"})," ",Object(u.jsxs)("p",{className:"text-green-700 font-medium items-end text-xl",children:["\u20b9",O]})]}),Object(u.jsx)("button",{className:"checkout-btn btn-green",onClick:function(){N([])},children:"Checkout"})]})]})},h=c(13),f=c.n(h),x=c(38),v=(c(51),function(e){var t=e.product,c=e.addToCart,s=e.removeFromCart,a=e.incrementItem,r=e.decrementItem,d=Object(n.useState)([]),l=Object(o.a)(d,2),j=l[0],b=l[1];return Object(n.useEffect)((function(){b(t)}),[t]),Object(u.jsxs)("div",{className:"shadow flex flex-col items-center p-3",children:[Object(u.jsx)("img",{src:j.smallImage,className:"w-64 h-48"}),Object(u.jsx)("p",{className:"font-medium capitalize",children:j.productName}),Object(u.jsxs)("p",{children:["\u20b9",j.productPrice]}),j.isAddedtoCart?Object(u.jsxs)("div",{className:"flex grid-cols-2 gap-2 grid w-4/5",children:[Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsxs)("button",{onClick:function(){return r(j)},disabled:j.count<=1,className:"disabled:opacity-50 disabled:cursor-text focus:outline-none",children:[Object(u.jsx)(i.b,{className:"w-5 h-5"})," "]}),Object(u.jsx)("span",{className:"mx-2",children:j.count}),j.count>=1?Object(u.jsx)("button",{onClick:function(){return a(j)},className:"focus:outline-none",children:Object(u.jsx)(i.c,{className:"w-5 h-5"})}):null]}),Object(u.jsx)("button",{onClick:function(){return s(j)},className:"btn btn-red",children:Object(u.jsx)(i.d,{})})]}):Object(u.jsx)("button",{onClick:function(){return c(j)},className:"btn btn-green",children:"Add to Cart"})]})}),N=Object(n.createContext)(),g=c(7),C=c(39),y=c.n(C),w="FETCH_PRODUCTS",I=c(40),T=c.n(I),k=(c(1558),function(){var e=Object(n.useContext)(d),t=e.cartItem,c=e.dispatch,s=Object(n.useContext)(N),a=s.products,r=s.productDispatch,o=function(){var e=Object(x.a)(f.a.mark((function e(){var t,c,n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("https://api.pexels.com/v1/search?query=toys&per_page=8&page=1",{headers:{Authorization:"563492ad6f917000010000018f3e254bdba740aab8247cce67fb3648"}});case 2:t=e.sent,c=t.data,n=c.photos,s=n.map((function(e){return{smallImage:e.src.medium,tinyImage:e.src.tiny,productName:g.random.word(),productPrice:g.commerce.price(),count:0,id:g.datatype.uuid(),age:g.datatype.number(6)}})),r({type:w,payload:s});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){o()}),[]),Object(n.useEffect)((function(){console.log("Cart item updated")}),[t]);var i=function(e){e.isAddedtoCart=!0,e.count=1,c({type:b,payload:e})},l=function(e){e.isAddedtoCart=!1,e.count=0,c({type:m,payload:e})},j=function(e){e.isAddedtoCart=!0,e.count>0&&(e.count=e.count+1),c({type:p,payload:e})},O=function(e){e.isAddedtoCart=!0,e.count>0&&(e.count=e.count-1),c({type:p,payload:e})};return Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"grid lg:grid-cols-4 gap-4 md:grid-cols-3 sm:grid-cols-2 px-4",children:void 0!==a.items?a.items.map((function(e){return Object(u.jsx)(v,{product:e,addToCart:i,removeFromCart:l,incrementItem:j,decrementItem:O},e.id)})):Object(u.jsx)("div",{className:"spinner-container",children:Object(u.jsx)(T.a,{color:"#10b981"})})})})}),A=c(10),E=function(e,t){switch(t.type){case b:return[].concat(Object(A.a)(e),[t.payload]);case m:return e.filter((function(e){return e.id!==t.payload.id}));case p:var c=e.findIndex((function(e){return e.id===t.payload.id}));return[].concat(Object(A.a)(e.slice(0,c)),[Object.assign(e[c],t.payload)],Object(A.a)(e.slice(c+1)));default:return e}},F=c(14),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(F.a)(Object(F.a)({},e),{},{items:t.payload});default:return e}};var S=function(){var e=Object(n.useReducer)(E,[]),t=Object(o.a)(e,2),c=t[0],s=t[1],a=Object(n.useReducer)(P,[]),r=Object(o.a)(a,2),l=r[0],j=r[1],b=Object(n.useState)({show:!1}),m=Object(o.a)(b,2),p=m[0],h=m[1],f=Object(n.useState)(0),x=Object(o.a)(f,2),v=x[0],g=x[1];return Object(n.useEffect)((function(){!function(){var e=0;c.map((function(t){e+=t.count})),g(e)}()}),[c]),Object(u.jsxs)(N.Provider,{value:{products:l,productDispatch:j},children:[Object(u.jsxs)(d.Provider,{value:{cartItem:c,dispatch:s},children:[Object(u.jsxs)("header",{className:"p-2 mb-4 border-b-2",children:[Object(u.jsx)("h1",{className:"text-2xl font-bold font-serif",children:"Toy shop"}),Object(u.jsxs)("button",{className:"right-4 top-3 absolute focus:outline-none",onClick:function(){h({show:!0})},children:[Object(u.jsx)(i.a,{className:"w-5 h-5"}),Object(u.jsx)("span",{className:"cart-badge",children:v})]})]}),Object(u.jsx)("div",{className:"product-filter"}),Object(u.jsx)(k,{}),Object(u.jsx)(O,{closeCart:function(){h({show:!1})},show:p.show})]}),Object(u.jsx)("footer",{children:Object(u.jsx)("div",{className:"footer-container",children:Object(u.jsx)("p",{children:"\xa9 2023 Shopping Cart"})})})]})},_=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,1567)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root")),_()},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},51:function(e,t,c){}},[[1565,1,2]]]);
//# sourceMappingURL=main.f6c42ac9.chunk.js.map